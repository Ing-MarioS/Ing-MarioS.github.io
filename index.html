<html>
    <head>
        <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
        <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v6.1.0/dist/aframe-extras.min.js"></script>
        <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
        <script src="https://superal.github.io/canvas2image/canvas2image.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
        
        
    </head>

    <body>
        
        <div style='position: fixed; bottom: 10px; width:100%; text-align: center; z-index: 1;'>
            
            <button id="Btn_Zurueck" style="border: 2px solid #4CAF50; border-radius:10px; color: black; padding: 16px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px;">Zurueck</button>
            <!--<p id="count">0</p>-->
            <button id="Btn_Screenshot" style="border: 2px solid #FF0000; border-radius:10px; color: black; padding: 16px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px;">Screenshot</button>
            <button id="Btn_Weiter" style="border: 2px solid #008CBA; border-radius:10px; color: black; padding: 16px 32px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px;">Weiter</button>
        </div>
        
        <a-scene embedded arjs="trackingMethod: best"> 
            
            <a-light type="ambient" intensity="1.5" color="white"></a-light>
            
            <a-marker-camera preset="hiro"></a-marker-camera>
            
            <a-gltf-model
                id="myFrieder"
                position="0 0 0"
                scale="0.2 0.2 0.2"
                src="demo/Frieder_Animation_Demo.gltf"
                animation-mixer="clip: NULL; loop: once;"                
            ></a-gltf-model>
            
            <a-gltf-model
                id="myCowboy"
                position="0.3 0 0"
                scale="0.2 0.2 0.2"
                src="demo/Cowboy_Animation_Demo.gltf"
                animation-mixer="clip: NULL; loop: once; timeScale: 0"
                visible="false"
            ></a-gltf-model>
            
            <a-box
                id="myTextBox"
                position="0 1.1 0"
                scale="1.1 0.3 0.05"
                color="#000035"
                visible="false"
            ></a-box>
            
            <a-entity
                id="myText"
                text="value: Willkommen im Waffenmuseum Suhl; align: center"
                lineHeight="0.8"
                position="0 1.1 0.05"
                width="0.2"
                height="1"
                visible="false"
            ></a-entity>
            
        </a-scene>
        
        <script>
            var v_Button_Zurueck = document.getElementById('Btn_Zurueck');
            var v_Button_Weiter = document.getElementById('Btn_Weiter');
            var v_Button_Screenshot = document.getElementById('Btn_Screenshot');
            var v_myTextBox = document.getElementById('myTextBox');
            var v_myText = document.getElementById('myText');
            
            var v_myCowboy = document.getElementById('myCowboy');
            var v_myFrieder = document.getElementById('myFrieder');
            
            var display = document.getElementById('count');
            var v_myBox = document.getElementById('myBox');
            var count = 0;
            var count_max = 6;
            
            v_Button_Zurueck.addEventListener('click', function() {
                count--
                
                if(count == 0){
                    count = 1;
                }
                
                //display.innerHTML = count;
                switch(count){
                    case 1:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: Welcome");
                        v_myText.setAttribute("visible", true);
                        v_myText.setAttribute("text", "value: Willkommen im Waffenmuseum Suhl");
                        v_myTextBox.setAttribute("visible", true);                
                        break;
                        
                    case 2:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: Introduction");
                        v_myText.setAttribute("text", "value: Mein Name ist Frieder, Ich begleite Euch durch unsere Ausstellung"); 
                        break;
                        
                    case 3:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: NULL");
                        v_myFrieder.setAttribute("animation-mixer", "clip: Welcome");
                        v_myText.setAttribute("text", "value: Ich wuensche Euch viel Spass");
                        // Anderes
                        v_myCowboy.setAttribute("visible", false);
                        break;
                        
                    case 4:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: NULL");
                        v_myFrieder.setAttribute("animation-mixer", "clip: Welcome");
                        v_myText.setAttribute("text", "value: Willkommen im Wilden Westen. Hier sind Cowboys und Revolverhelden bekannt fuer ihre Schusswaffen!");
                        // Anderes
                        v_myCowboy.setAttribute("visible", true);
                        break;
                        
                    case 5:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: NULL");
                        v_myFrieder.setAttribute("animation-mixer", "clip: Welcome");
                        v_myText.setAttribute("text", "value: Sie konnten Ziele auf kurze Distanz schnell und praezise treffen");                        
                        break;
                        
                    case 6:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: Show_Left");
                        v_myText.setAttribute("text", "value: Seht nur...");
                        // Anderes
                        v_myCowboy.setAttribute("animation-mixer", {timeScale: 1});
                        v_myCowboy.setAttribute("animation-mixer", "clip: NULL");
                        v_myCowboy.setAttribute("animation-mixer", "clip: Shoot_Pistol");
                        break;
                }    
            });
            
            v_Button_Weiter.addEventListener('click', function() {
                count++
                
                if(count == count_max + 1){
                    count = count_max;
                }
                
                //display.innerHTML = count;
                switch(count){
                    case 1:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: Welcome");
                        v_myText.setAttribute("visible", true);
                        v_myText.setAttribute("text", "value: Willkommen im Waffenmuseum Suhl");
                        v_myTextBox.setAttribute("visible", true);                
                        break;
                        
                    case 2:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: Introduction");
                        v_myText.setAttribute("text", "value: Mein Name ist Frieder, Ich begleite Euch durch unsere Ausstellung"); 
                        break;
                        
                    case 3:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: NULL");
                        v_myFrieder.setAttribute("animation-mixer", "clip: Welcome");
                        v_myText.setAttribute("text", "value: Ich wuensche Euch viel Spass");
                        // Anderes
                        v_myCowboy.setAttribute("visible", false);
                        break;
                        
                    case 4:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: NULL");
                        v_myFrieder.setAttribute("animation-mixer", "clip: Welcome");
                        v_myText.setAttribute("text", "value: Willkommen im Wilden Westen. Hier sind Cowboys und Revolverhelden bekannt fuer ihre Schusswaffen!");
                        // Anderes
                        v_myCowboy.setAttribute("visible", true);
                        break;
                        
                    case 5:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: NULL");
                        v_myFrieder.setAttribute("animation-mixer", "clip: Welcome");
                        v_myText.setAttribute("text", "value: Sie konnten Ziele auf kurze Distanz schnell und praezise treffen");                        
                        break;
                        
                    case 6:
                        // Frieder
                        v_myFrieder.setAttribute("animation-mixer", "clip: Show_Left");
                        v_myText.setAttribute("text", "value: Seht nur...");
                        // Anderes
                        v_myCowboy.setAttribute("animation-mixer", {timeScale: 1});
                        v_myCowboy.setAttribute("animation-mixer", "clip: NULL");
                        v_myCowboy.setAttribute("animation-mixer", "clip: Shoot_Pistol");
                        break;
                }
            });

            v_Button_Screenshot.addEventListener('click', function() {
                //document.querySelector('a-scene').components.screenshot.capture('perspective');
                html2canvas(document.querySelector('.specific'), {
                    onrendered: function(canvas) {
                      // document.body.appendChild(canvas);
                      return Canvas2Image.saveAsPNG(canvas);
                    }
                });                                
            });

                         
        </script>
        
    </body>
</html>